<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Find Your Perfect Home - Doorstep Demo</title>
  <link rel="icon" type="image/png" href="doorstep-logo.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="questionnaire-wizard.css">
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="container">
      <div class="header-content">
        <a href="index.html" class="logo-link">
          <img src="doorstep-logo.png" alt="Doorstep" class="header-logo">
        </a>
        <nav class="main-nav">
          <a href="index.html">Home</a>
          <a href="questionnaire-wizard-demo.html" class="active">Find a Home</a>
          <a href="professionals.html">Valuations</a>
        </nav>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="wizard-page">
    <div class="wizard-container">

      <!-- Progress Bar -->
      <div class="progress-container">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <div class="progress-steps">
          <div class="progress-step active" data-step="1">
            <div class="step-circle">1</div>
            <span>Budget</span>
          </div>
          <div class="progress-step" data-step="2">
            <div class="step-circle">2</div>
            <span>Property</span>
          </div>
          <div class="progress-step" data-step="3">
            <div class="step-circle">3</div>
            <span>Location</span>
          </div>
          <div class="progress-step" data-step="4">
            <div class="step-circle">4</div>
            <span>Priorities</span>
          </div>
          <div class="progress-step" data-step="5">
            <div class="step-circle">5</div>
            <span>Results</span>
          </div>
        </div>
      </div>

      <!-- Step 1: Budget -->
      <div class="wizard-step active" id="step-1">
        <div class="step-content">
          <h1>What's your budget?</h1>
          <p class="subtitle">We'll find properties within your price range</p>

          <div class="form-group-large">
            <label>Maximum budget</label>
            <div class="budget-input">
              <span class="currency">¬£</span>
              <input type="number" id="budget-max" placeholder="500,000" step="10000" value="2000000" required>
            </div>
            <small>Enter the maximum you can spend</small>
          </div>

          <div class="form-group-large">
            <label>Minimum budget (optional)</label>
            <div class="budget-input">
              <span class="currency">¬£</span>
              <input type="number" id="budget-min" placeholder="200,000" step="10000">
            </div>
          </div>

          <div class="popular-budgets">
            <p>Popular budgets:</p>
            <button type="button" class="budget-quick" onclick="setBudget(300000)">¬£300,000</button>
            <button type="button" class="budget-quick" onclick="setBudget(500000)">¬£500,000</button>
            <button type="button" class="budget-quick" onclick="setBudget(750000)">¬£750,000</button>
            <button type="button" class="budget-quick" onclick="setBudget(1000000)">¬£1,000,000</button>
            <button type="button" class="budget-quick" onclick="setBudget(2000000)">¬£2,000,000</button>
          </div>

          <button class="btn btn-primary btn-next" onclick="nextStep()">Continue</button>
        </div>
      </div>

      <!-- Step 2: Property Requirements -->
      <div class="wizard-step" id="step-2">
        <div class="step-content">
          <h1>What type of property?</h1>
          <p class="subtitle">Tell us about your ideal home</p>

          <div class="form-group-large">
            <label>How many bedrooms?</label>
            <div class="bedroom-selector">
              <button type="button" class="bedroom-btn" data-beds="1">1</button>
              <button type="button" class="bedroom-btn" data-beds="2">2</button>
              <button type="button" class="bedroom-btn" data-beds="3">3</button>
              <button type="button" class="bedroom-btn active" data-beds="4">4</button>
              <button type="button" class="bedroom-btn" data-beds="5">5+</button>
            </div>
          </div>

          <div class="form-group-large">
            <label>Property type (select any that interest you)</label>
            <div class="property-type-grid">
              <div class="property-type-card active" data-type="flat">
                <div class="icon">üè¢</div>
                <h3>Flat</h3>
                <p>Apartment</p>
              </div>
              <div class="property-type-card" data-type="terraced">
                <div class="icon">üèòÔ∏è</div>
                <h3>Terraced</h3>
                <p>Town house</p>
              </div>
              <div class="property-type-card active" data-type="semi_detached">
                <div class="icon">üè°</div>
                <h3>Semi-Detached</h3>
                <p>Shared wall</p>
              </div>
              <div class="property-type-card active" data-type="detached">
                <div class="icon">üè†</div>
                <h3>Detached</h3>
                <p>Standalone</p>
              </div>
            </div>
          </div>

          <div class="wizard-nav">
            <button class="btn btn-secondary" onclick="prevStep()">Back</button>
            <button class="btn btn-primary btn-next" onclick="nextStep()">Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 3: Location -->
      <div class="wizard-step" id="step-3">
        <div class="step-content">
          <h1>Where do you want to live?</h1>
          <p class="subtitle">Search by postcode or area</p>

          <div class="form-group-large">
            <label>Postcode areas</label>
            <input type="text" id="postcode-areas" placeholder="e.g. SW1, W1, NW3" class="large-input" value="SW1, W1">
            <small>Separate multiple areas with commas</small>
          </div>

          <div class="form-group-large">
            <label>Search radius</label>
            <div class="radius-slider-container">
              <input type="range" id="radius-slider" min="1" max="20" value="10" step="0.5">
              <div class="radius-value"><span id="radius-value">10</span> km</div>
            </div>
          </div>

          <div class="location-extras">
            <h3>Transport preferences (optional)</h3>

            <div class="form-row">
              <div class="form-group">
                <label>Near airport</label>
                <select id="target-airport">
                  <option value="">Any</option>
                  <option value="LHR" selected>London Heathrow</option>
                  <option value="LGW">London Gatwick</option>
                  <option value="STN">Stansted</option>
                  <option value="LTN">Luton</option>
                  <option value="LCY">London City</option>
                </select>
              </div>
              <div class="form-group">
                <label>Max distance to airport</label>
                <input type="number" id="max-airport-dist" placeholder="15" min="1" max="50" value="20"> km
              </div>
            </div>
          </div>

          <div class="wizard-nav">
            <button class="btn btn-secondary" onclick="prevStep()">Back</button>
            <button class="btn btn-primary btn-next" onclick="nextStep()">Continue</button>
          </div>
        </div>
      </div>

      <!-- Step 4: Priorities -->
      <div class="wizard-step" id="step-4">
        <div class="step-content">
          <h1>What matters most to you?</h1>
          <p class="subtitle">Drag the sliders to show what's important</p>

          <div class="priorities-grid">
            <div class="priority-card">
              <div class="priority-icon">üè´</div>
              <div class="priority-content">
                <h3>Good Schools</h3>
                <p>Outstanding rated schools nearby</p>
                <input type="range" id="priority-schools" min="0" max="100" value="25" class="priority-slider">
                <div class="priority-value"><span id="val-schools">25</span>%</div>
              </div>
            </div>

            <div class="priority-card">
              <div class="priority-icon">üöá</div>
              <div class="priority-content">
                <h3>Easy Commute</h3>
                <p>Close to stations & transport</p>
                <input type="range" id="priority-commute" min="0" max="100" value="20" class="priority-slider">
                <div class="priority-value"><span id="val-commute">20</span>%</div>
              </div>
            </div>

            <div class="priority-card">
              <div class="priority-icon">üõ°Ô∏è</div>
              <div class="priority-content">
                <h3>Safe Area</h3>
                <p>Low crime & high quality</p>
                <input type="range" id="priority-safety" min="0" max="100" value="20" class="priority-slider">
                <div class="priority-value"><span id="val-safety">20</span>%</div>
              </div>
            </div>

            <div class="priority-card">
              <div class="priority-icon">‚ö°</div>
              <div class="priority-content">
                <h3>Energy Efficient</h3>
                <p>Good EPC rating</p>
                <input type="range" id="priority-energy" min="0" max="100" value="15" class="priority-slider">
                <div class="priority-value"><span id="val-energy">15</span>%</div>
              </div>
            </div>

            <div class="priority-card">
              <div class="priority-icon">üí∞</div>
              <div class="priority-content">
                <h3>Great Value</h3>
                <p>Undervalued properties</p>
                <input type="range" id="priority-value" min="0" max="100" value="15" class="priority-slider">
                <div class="priority-value"><span id="val-value">15</span>%</div>
              </div>
            </div>

            <div class="priority-card">
              <div class="priority-icon">üèõÔ∏è</div>
              <div class="priority-content">
                <h3>Conservation Area</h3>
                <p>Protected historic area</p>
                <input type="range" id="priority-conservation" min="0" max="100" value="5" class="priority-slider">
                <div class="priority-value"><span id="val-conservation">5</span>%</div>
              </div>
            </div>
          </div>

          <div class="priority-total">
            <span>Total importance:</span>
            <span id="total-priority" class="priority-total-value">100%</span>
          </div>

          <div class="wizard-nav">
            <button class="btn btn-secondary" onclick="prevStep()">Back</button>
            <button class="btn btn-primary btn-large" onclick="searchPropertiesDemo()">
              <span>Find My Perfect Home</span>
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M19 19L13 13M15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8Z" stroke="currentColor" stroke-width="2"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Step 5: Results (DEMO with mock data) -->
      <div class="wizard-step" id="step-5">
        <div class="step-content">
          <div id="loading-state">
            <div class="loading-spinner">
              <div class="spinner"></div>
              <p>Finding your perfect homes...</p>
            </div>
          </div>

          <div id="results-content" style="display: none;">
            <!-- Will be populated by JavaScript with demo data -->
          </div>
        </div>
      </div>

    </div>
  </main>

  <script src="questionnaire-wizard.js"></script>
  <script>
    // Override with demo data
    async function searchPropertiesDemo() {
      wizardState.currentStep = 5;
      showStep(5);
      updateProgress();

      document.getElementById('loading-state').style.display = 'block';
      document.getElementById('results-content').style.display = 'none';

      // Simulate API delay
      setTimeout(() => {
        displayDemoResults();
      }, 2000);
    }

    function displayDemoResults() {
      document.getElementById('loading-state').style.display = 'none';
      const resultsContainer = document.getElementById('results-content');
      resultsContainer.style.display = 'block';

      // Mock Savills properties
      const mockResults = [
        { id: 1, title: '4 Bedroom House', price: 1595000, beds: 4, baths: 3, address: 'Elton, Ludlow, Herefordshire', postcode: 'SY8 2HQ', epc: 'B', match: 92, image: 'elegant-1498629.jpg' },
        { id: 2, title: '5 Bedroom House', price: 2250000, beds: 5, baths: 4, address: 'Chelsea, London', postcode: 'SW3 5EZ', epc: 'C', match: 88, undervalued: true, image: 'property-front.jpg' },
        { id: 3, title: '3 Bedroom Flat', price: 875000, beds: 3, baths: 2, address: 'Kensington, London', postcode: 'W8 6SH', epc: 'B', match: 85, image: 'elegant-1498629.jpg' },
        { id: 4, title: '4 Bedroom Detached', price: 1450000, beds: 4, baths: 3, address: 'Richmond, London', postcode: 'TW9 2PD', epc: 'A', match: 82, undervalued: true, image: 'property-front.jpg' },
        { id: 5, title: '6 Bedroom House', price: 3200000, beds: 6, baths: 5, address: 'Hampstead, London', postcode: 'NW3 7TH', epc: 'C', match: 78, image: 'elegant-1498629.jpg' }
      ];

      let html = `
        <div class="results-header">
          <h2>We found ${mockResults.length} perfect homes for you!</h2>
          <p>Sorted by best match based on your preferences</p>
        </div>
        <div class="results-grid">
      `;

      mockResults.forEach(prop => {
        const price = new Intl.NumberFormat('en-GB', { style: 'currency', currency: 'GBP', maximumFractionDigits: 0 }).format(prop.price);

        html += `
          <div class="result-card" onclick="window.location.href='professional-report.html?demo=true&title=${encodeURIComponent(prop.title)}&price=${prop.price}&address=${encodeURIComponent(prop.address)}'">
            <div class="result-image" style="background-image: url('${prop.image}'); background-size: cover; background-position: center;">
              <div class="match-badge">${prop.match}% Match</div>
            </div>
            <div class="result-content">
              <div class="result-price">${price}</div>
              <h3 class="result-title">${prop.title}</h3>
              <p class="result-address">${prop.address}, ${prop.postcode}</p>

              <div class="result-features">
                <span class="feature-badge">${prop.beds} bed</span>
                <span class="feature-badge">${prop.baths} bath</span>
                <span class="feature-badge">EPC ${prop.epc}</span>
                ${prop.undervalued ? '<span class="feature-badge highlight">Great Value</span>' : ''}
              </div>

              <div class="result-match-bar">
                <div class="match-bar-fill" style="width: ${prop.match}%"></div>
              </div>

              <button class="btn btn-primary btn-sm">
                View Details & Get ¬£5 Report
              </button>
            </div>
          </div>
        `;
      });

      html += `
        </div>
        <div class="results-actions">
          <button class="btn btn-secondary" onclick="window.location.reload()">New Search</button>
        </div>
      `;

      resultsContainer.innerHTML = html;
      addResultsCSS();
    }
  </script>

</body>
</html>
